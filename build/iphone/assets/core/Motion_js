function Motion(){function e(e){if(e.success){var t=e.userAcceleration;Math.abs(o-t.x)>a&&s++,Math.abs(lastY-t.y)>a&&accelY++,Math.abs(lastZ-t.z)>a&&accelZ++,i(),o=t.x,lastY=t.y,lastZ=t.z;var r=e.attitude;d&&(r.pitch>=-2.25&&r.pitch<-.25&&r.roll>=.9&&r.roll<2.5?(Ti.API.info("Starting position!"),Ti.App.fireEvent("position",{what:!0})):(Ti.API.info("No starting position"),Ti.App.fireEvent("position",{what:!1}))),n.imInStarting?(Ti.API.info("sono in starting e la variabile è "+l),r.pitch>=-.4&&r.pitch<.4&&r.roll>=1.2&&r.roll<1.7&&(r.yaw>=u-.5&&r.yaw<u+.5?l?(Ti.API.info("Bang!"),m.play(),Ti.API.info("ACCELERAZIONE: "+o+" "+lastY+" "+lastZ),Ti.API.info(r.yaw+" con yaw di riferimento "+u),n.imInStarting=!1,c=!1,n.stopMotionRecognizer()):(Ti.API.info("Fault!"),l=!1,n.imInStarting=!1,c=!1):(Ti.API.info("Missed!"),n.imInStarting=!1,c=!1,Ti.API.info(r.yaw+" con yaw di riferimento "+u)))):Ti.API.info("im in starting è false"),c||(u=r.yaw)}else e.error&&Ti.API.error(e.error)}function i(){if(s>r||accelY>r||accelZ>r){s>r&&accelY>r?(Ti.API.info("Quit shaking me back and forth!"),Ti.API.info(accelZ)):s>r&&accelZ>r?Ti.API.info("Quit shaking me up and down!"):accelZ>r&&accelY>r&&Ti.API.info("Why are you shaking me like that?!"),s=accelY=accelZ=0}}var t=require("ti.coremotion"),n={},s=accelY=accelZ=0,o=lastY=lastZ=0,a=1,r=1;n.imInStarting=!1;{var c=!1,u=0,l=!1,d=!0,m=ZLSound.createSample({media:"music/colt_shot.mp3",volume:1});ZLSound.createSample({media:"music/colt_shot.mp3",volume:1})}return n.startMotionRecognizer=function(){if(t.isDeviceMotionAvailable()){t.setDeviceMotionUpdateInterval(200);var i=t.availableAttitudeReferenceFrames(),n=t.ATTITUDE_REFERENCE_FRAME_X_ARBITRARY_CORRECTED_Z_VERTICAL;i&n?(Ti.API.info("REFERENCE FRAME: True North"),t.startDeviceMotionUpdatesUsingReferenceFrame({referenceFrame:n},e)):(n=t.getAttitudeReferenceFrame())?(Ti.API.info("REFERENCE FRAME: Default "+n),t.startDeviceMotionUpdatesUsingReferenceFrame({referenceFrame:n},e)):(Ti.API.info("REFERENCE FRAME: None"),t.startDeviceMotionUpdates(e))}},n.stopMotionRecognizer=function(){t.stopDeviceMotionUpdates(),Ti.API.info("Motion updates stop")},Ti.App.addEventListener("user_can_fire",function(){l=!0,d=!1}),n}module.exports=Motion;