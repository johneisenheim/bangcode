function Charts(){var e=require("ui/customUI/PageTitle"),t=new e;t.initialize("Charts",10);var i=null,o=Titanium.UI.createWindow({navTintColor:"white",tintColor:"#E2BB5A",barColor:"#E2BB5A",extendEdges:[Ti.UI.EXTEND_EDGE_TOP],backgroundColor:"#F5F4F2",translucent:!0,statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,layout:"composite",backButtonTitle:String.format(L("main:back"),"")}),n=Titanium.UI.createScrollView({backgroundColor:"#F5F4F2",width:Ti.UI.SIZE,height:Ti.UI.SIZE,layout:"vertical",top:65}),a=Titanium.UI.createView({backgroundColor:"#E2BB5A",width:"100%",height:30,layout:"horizontal"}),r=Titanium.UI.createLabel({left:10,top:3,font:{fontSize:19,fontFamily:"Roboto-Light"},text:"Classifica globale",textAlign:"center",color:"white"});a.add(r);var l=Titanium.UI.createView({width:Ti.Platform.displayCaps.platformWidth,height:45,backgroundColor:"transparent",layout:"composite"}),d=Titanium.UI.createView({width:29,height:8,backgroundColor:"transparent",backgroundImage:"images/points.png"});l.add(d);var s=Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,"separator.png");s.write(l.toImage()),n.add(t),o.add(n),o.addEventListener("open",function(){loader.showLoader(o);var e=Ti.Network.createHTTPClient({onload:function(){Ti.API.info("Received text: "+this.responseText);for(var e=JSON.parse(this.responseText),t=e[0][0].global_chart,r=[],l=e[1],d=0;d<l.length;d++){var u={title:d+1+". "+l[d].vsName+" con "+l[d].global_chart+" punti",height:45,font:{fontSize:18,fontFamily:"Roboto-Light"}};l[d].vsName===Ti.App.Properties.getString("fb_first_name")+" "+Ti.App.Properties.getString("fb_last_name")?(u.color="white",u.backgroundColor="#F4D181"):u.color="#856C64",r.push(u)}t>20&&(r.push({title:"",height:45,color:"#856C64",backgroundColor:"#F5F4F2",backgroundImage:s.getNativePath()}),r.push({title:t+". "+Titanium.App.Properties.getString("fb_first_name")+" "+Titanium.App.Properties.getString("fb_last_name"),height:45,color:"#856C64",font:{fontSize:18,fontFamily:"Roboto-Light"}})),r.length>0&&(i=Titanium.UI.createTableView({top:25,width:"100%",height:45*r.length+30,showVerticalScrollIndicator:!0,separatorColor:"#B8B1AF",backgroundColor:"#FDFDFD",headerView:a,data:r,scrollable:!1,selectionStyle:Titanium.UI.iPhone.TableViewCellSelectionStyle.GRAY}),n.add(i)),n.add(c),loader.hideLoader(o)},onerror:function(e){Ti.API.debug(e.error),loader.hideLoader(o)},timeout:5e3}),t={id_player:Ti.App.Properties.getString("fb_id")};Ti.API.info(JSON.stringify(t)),e.open("GET",global.bangServerUrl+"/stats-getGlobalChart.php?chart="+JSON.stringify(t)),e.send()});var c=Titanium.UI.createView({width:1,height:20,backgroundColor:"transparent"});return o}module.exports=Charts;