function Training(){function e(){0==l?(Ti.API.info("countdown BANG!"),d.stop(),clearInterval(n),setTimeout(function(){startTime=new Date,s.play(),Ti.App.fireEvent("user_can_fire",{})},300)):(Ti.API.info(l),l-=1)}function t(){Ti.API.info("startCountdown function"),Ti.API.info(l),d.play(),n=setInterval(e,1e3)}var i=require("ui/training/TrainingView"),o=new i,n=null,a=!0,r=Math.floor(4*Math.random()+1),l=3+r,s=ZLSound.createSample({media:"music/bell.mp3",volume:1}),d=ZLSound.createSample({media:"music/tic.mp3",volume:1}),c=Titanium.UI.createWindow({navTintColor:"white",tintColor:"#E2BB5A",barColor:"#E2BB5A",extendEdges:[Ti.UI.EXTEND_EDGE_TOP],backgroundColor:"#F5F4F2",translucent:!0,statusBarStyle:Titanium.UI.iPhone.StatusBar.GRAY,layout:"composite",tabBarHidden:!0,modal:!0,orientationModes:[1]}),u=Titanium.UI.createButton({title:"Chiudi",font:{fontSize:19},color:"#856C64",top:20,right:15}),m=function(){o.initialize(),c.add(o)};c.addEventListener("open",m),u.addEventListener("click",function(){c.close()}),Ti.App.addEventListener("timeExchange",function(e){if(a){var t=require("ui/training/Calculating"),i=new t;a=!1;var r=null;if(null!=o&&(r=o.getMotionObject(),o.removeEventOnOrientation(),r.stopMotionRecognizer(),c.remove(o)),c.add(i),999999999==e.flag){Ti.API.info("e.flag: "+e.flag),myTime=e.flag;var l=require("ui/training/TrainingMissed"),s=new l(c);setTimeout(function(){c.remove(i),c.add(s),s.playSound()},2500)}else if(888888888==e.flag){clearInterval(n),d.stop(),myTime=e.flag;var u=require("ui/training/TrainingLose"),m=new u(c);setTimeout(function(){c.remove(i),c.add(m),m.playSound()},2500)}else{myTime=diffTime;var T=require("ui/training/TrainingWin"),h=new T(c);setTimeout(function(){c.remove(i),c.add(h),h.playSound()},2500)}}}),c.add(u);var T=function(){Ti.API.info("closing window..."),myTime=0,vsTime=0,startTime=0,endTime=0,diffTime=0,l=0};return c.addEventListener("close",T),Ti.App.addEventListener("start_countdown",function(){Ti.API.info("start_countdown called"),t()}),c}module.exports=Training;