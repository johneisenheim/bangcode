function FacebookFriends(){var e="",t="",i=Titanium.UI.createButton({systemButton:Ti.UI.iPhone.SystemButton.DONE});i.addEventListener("click",function(){""!==e&&Ti.App.fireEvent("friend_choosen",{who:e,id:t}),a.close()});var n=Titanium.UI.createWindow({navTintColor:"white",tintColor:"#E2BB5A",barColor:"#E2BB5A",extendEdges:[Ti.UI.EXTEND_EDGE_TOP],backgroundColor:"#F5F4F2",translucent:!0,statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,layout:"composite",tabBarHidden:!0,rightNavButton:i}),a=Ti.UI.iOS.createNavigationWindow({modal:!0,modalTransitionStyle:Ti.UI.iPhone.MODAL_TRANSITION_STYLE_CROSS_DISSOLVE,modalStyle:Ti.UI.iPhone.MODAL_PRESENTATION_FORMSHEET,window:n}),o=Titanium.UI.createSearchBar({barColor:"#d5d1c8",height:43,hintText:"Cerca amici",borderColor:"#d5d1c8",top:64,showCancel:!1,tintColor:"white"});o.addEventListener("cancel",function(){o.blur()});var r=Ti.UI.createActivityIndicator({color:"#856C64",font:{fontFamily:"Roboto-Light",fontSize:19},style:Ti.UI.iPhone.ActivityIndicatorStyle.DARK,height:Ti.UI.SIZE,width:Ti.UI.SIZE,top:"50%"}),l=null;return Ti.App.addEventListener("friends_done",function(i){var n=null;try{n=JSON.parse(i.data)}catch(s){alert(i.data)}for(var d=[],c=null,u=1;u<=n.length;u++){var m=n[u-1].id+".png";if(c=Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,m),!c.exists()){var T=Titanium.UI.createImageView({image:"https://graph.facebook.com/"+n[u-1].id+"/picture?width=200&height=200",width:120,height:120});c.write(T.toBlob())}var f=Ti.UI.createTableViewRow({className:n[u-1].name,rowIndex:u,height:50,font:{fontFamily:"Roboto-Light",fontSize:19},color:"#958078",backgroundColor:"white",title:n[u-1].name,selectedColor:"white",selectionStyle:Titanium.UI.iPhone.TableViewCellSelectionStyle.GRAY,fb_id:n[u-1].id,hasCheck:!1,leftImage:c.getNativePath()});d.push(f),c=null}l=Titanium.UI.createTableView({height:50*n.length,backgroundColor:"transparent",width:"100%",height:"100%",separatorColor:"#958078",top:60,data:d,tintColor:"#E2BB5A",style:Titanium.UI.iPhone.TableViewStyle.GROUPED,search:o}),l.addEventListener("click",function(i){t=i.rowData.fb_id,e=i.rowData.title;var n=i.rowData.rowIndex;Ti.API.info("TMP è "+n);for(var a=0;a<d.length;a++)a==n-1?d[a].hasCheck=!0:a!=n-1&&(Ti.API.info(a+" è diverso da "+n),Ti.API.info(d[a]),d[a].hasCheck=!1);l.setData(d)}),a.add(l),r.hide()}),n.addEventListener("open",function(){var e=require("login/facebook/FacebookHandler"),t=new e;t.getInvitableFriends()}),n.add(r),r.show(),a}module.exports=FacebookFriends;