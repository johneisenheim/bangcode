function FacebookFriends(){var e="",t="",i=Titanium.UI.createButton({systemButton:Ti.UI.iPhone.SystemButton.DONE});i.addEventListener("click",function(){""!==e&&Ti.App.fireEvent("friend_choosen",{who:e,id:t}),o.close()});var n=Titanium.UI.createWindow({navTintColor:"white",tintColor:"#E2BB5A",barColor:"#E2BB5A",extendEdges:[Ti.UI.EXTEND_EDGE_TOP],backgroundColor:"#F5F4F2",translucent:!0,statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,layout:"composite",tabBarHidden:!0,rightNavButton:i}),o=Ti.UI.iOS.createNavigationWindow({modal:!0,modalTransitionStyle:Ti.UI.iPhone.MODAL_TRANSITION_STYLE_CROSS_DISSOLVE,modalStyle:Ti.UI.iPhone.MODAL_PRESENTATION_FORMSHEET,window:n}),a=Titanium.UI.createSearchBar({barColor:"#d5d1c8",height:43,hintText:"Cerca amici",borderColor:"#d5d1c8",top:64,showCancel:!0,tintColor:"white"});a.addEventListener("cancel",function(){a.blur()});var r=Ti.UI.createActivityIndicator({color:"#856C64",font:{fontFamily:"Roboto-Light",fontSize:19},style:Ti.UI.iPhone.ActivityIndicatorStyle.DARK,height:Ti.UI.SIZE,width:Ti.UI.SIZE,top:"50%"}),l=null;return Ti.App.addEventListener("friends_done",function(i){Ti.API.info(i.data);for(var n=JSON.parse(i.data),d=[],s=null,c=1;c<=n.length;c++){var u=n[c-1].id+".png";if(s=Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,u),!s.exists()){var h=Titanium.UI.createImageView({image:"https://graph.facebook.com/"+n[c-1].id+"/picture?width=200&height=200",width:120,height:120});s.write(h.toBlob())}var T=Ti.UI.createTableViewRow({className:n[c-1].name,rowIndex:c,height:50,font:{fontFamily:"Roboto-Light",fontSize:19},color:"#958078",backgroundColor:"white",title:n[c-1].name,selectedColor:"white",selectionStyle:Titanium.UI.iPhone.TableViewCellSelectionStyle.GRAY,fb_id:n[c-1].id,hasCheck:!1,leftImage:s.getNativePath()});d.push(T),s=null}l=Titanium.UI.createTableView({height:50*n.length,backgroundColor:"transparent",width:"100%",height:"100%",separatorColor:"#958078",top:60,data:d,tintColor:"E2BB5A",style:Titanium.UI.iPhone.TableViewStyle.GROUPED,search:a,tintColor:"white"}),l.addEventListener("click",function(i){t=i.rowData.fb_id,i.rowData.hasCheck=!0,e=i.rowData.title}),o.add(l),r.hide()}),n.addEventListener("open",function(){var e=require("login/facebook/FacebookHandler"),t=new e;t.getInvitableFriends()}),n.add(r),r.show(),o}module.exports=FacebookFriends;