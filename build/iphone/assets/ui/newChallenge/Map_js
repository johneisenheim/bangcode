function Map(){var e=require("ti.map"),t="",i=Titanium.UI.createButton({systemButton:Ti.UI.iPhone.SystemButton.DONE});i.addEventListener("click",function(){""!==t&&Ti.App.fireEvent("location_choosen",{latitude:o.latitude,longitude:o.longitude}),o.close()});var n=Titanium.UI.createWindow({navTintColor:"white",tintColor:"#E2BB5A",barColor:"#E2BB5A",extendEdges:[Ti.UI.EXTEND_EDGE_TOP],backgroundColor:"#F5F4F2",translucent:!0,statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,layout:"composite",tabBarHidden:!0,rightNavButton:i}),o=Ti.UI.iOS.createNavigationWindow({modal:!0,modalTransitionStyle:Ti.UI.iPhone.MODAL_TRANSITION_STYLE_CROSS_DISSOLVE,modalStyle:Ti.UI.iPhone.MODAL_PRESENTATION_FORMSHEET,window:n});o.latitude="",o.longitude="";var a=e.createView({mapType:e.NORMAL_TYPE,animate:!0,regionFit:!0,userLocation:!0});n.add(a);var r=function(e,t,i){var n=e.region;Ti.API.info(n.latitudeDelta);var o=-n.latitudeDelta/e.rect.height,a=n.longitudeDelta/e.rect.width;return{lat:(i-e.rect.height/2)*o+n.latitude,lon:(t-e.rect.width/2)*a+n.longitude}},l=e.createAnnotation({pincolor:e.ANNOTATION_RED,draggable:!0});return a.addEventListener("longpress",function(e){var i=r(a,e.x,e.y);o.latitude=i.lat,o.longitude=i.lon,l.latitude=i.lat,l.longitude=i.lon,a.addAnnotation(l),t=!0}),o.isLocationSet=function(){return""===o.latitude&&""===o.longitude?!1:{latitude:o.latitude,longitude:o.longitude}},o}function getCords(e){var t=e.source.actualRegion||e.source.region,i=e.source.rect.width,n=e.source.rect.height,o=-t.latitudeDelta/n,a=t.longitudeDelta/i,r={lat:(e.y-n/2)*o+t.latitude,lon:(e.x-i/2)*a+t.longitude};return r}module.exports=Map;