function MapToSet(){var e=require("ti.map"),t="",i=Titanium.UI.createButton({systemButton:Ti.UI.iPhone.SystemButton.DONE});i.addEventListener("click",function(){""!==t&&Ti.App.fireEvent("location_choosen",{latitude:a.latitude,longitude:a.longitude}),a.close()});var n=Titanium.UI.createWindow({navTintColor:"white",tintColor:"#E2BB5A",barColor:"#E2BB5A",extendEdges:[Ti.UI.EXTEND_EDGE_TOP],backgroundColor:"#F5F4F2",translucent:!0,statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,layout:"composite",tabBarHidden:!0,rightNavButton:i}),a=Ti.UI.iOS.createNavigationWindow({modal:!0,modalTransitionStyle:Ti.UI.iPhone.MODAL_TRANSITION_STYLE_CROSS_DISSOLVE,modalStyle:Ti.UI.iPhone.MODAL_PRESENTATION_FORMSHEET,window:n});a.latitude="",a.longitude="";var o=e.createView({mapType:e.NORMAL_TYPE,animate:!0,regionFit:!0,userLocation:!0});n.add(o);var r=function(e,t,i){var n=e.region;Ti.API.info(n.latitudeDelta);var a=-n.latitudeDelta/e.rect.height,o=n.longitudeDelta/e.rect.width;return{lat:(i-e.rect.height/2)*a+n.latitude,lon:(t-e.rect.width/2)*o+n.longitude}},l=e.createAnnotation({pincolor:e.ANNOTATION_RED,draggable:!0});return o.addEventListener("longpress",function(e){var i=r(o,e.x,e.y);a.latitude=i.lat,a.longitude=i.lon,l.latitude=i.lat,l.longitude=i.lon,o.addAnnotation(l),t=!0}),a.isLocationSet=function(){return""===a.latitude&&""===a.longitude?!1:{latitude:a.latitude,longitude:a.longitude}},a}function getCords(e){var t=e.source.actualRegion||e.source.region,i=e.source.rect.width,n=e.source.rect.height,a=-t.latitudeDelta/n,o=t.longitudeDelta/i,r={lat:(e.y-n/2)*a+t.latitude,lon:(e.x-i/2)*o+t.longitude};return r}module.exports=MapToSet;