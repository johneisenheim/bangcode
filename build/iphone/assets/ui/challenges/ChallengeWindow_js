function ChallengeWindow(){var e=require("ui/challenges/ChallengeView"),t=require("ui/challenges/ChallengesDetailsTable1"),i=require("ui/challenges/ChallengesDetailsTable2"),n=require("ui/challenges/ChallengesDetailsTable3"),a=null,o=Titanium.UI.createWindow({navTintColor:"white",tintColor:"#E2BB5A",barColor:"#E2BB5A",extendEdges:[Ti.UI.EXTEND_EDGE_TOP],backgroundColor:"#F5F4F2",translucent:!0,statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,layout:"composite",backButtonTitle:String.format(L("main:back"),""),tabBarHidden:!0});loader.showLoader(o);var r=Ti.Network.createHTTPClient({onload:function(){Ti.API.info("Received text: "+this.responseText);var r=JSON.parse(this.responseText);switch(r.return){case-1:break;case-2:a=new e([null,null,null,null]),setTimeout(function(){loader.hideLoader(o),o.add(a)},1e3);break;default:var s=createTables(r,t,i,n);a=new e(s),setTimeout(function(){loader.hideLoader(o),o.add(a)},2e3)}},onerror:function(e){Ti.API.debug(e.error)},timeout:5e3}),s={id_player:Ti.App.Properties.getString("fb_id")};return Ti.API.info(JSON.stringify(s)),r.open("GET",global.bangServerUrl+"/challenge-myChallenge.php?challenge="+JSON.stringify(s)),r.send(),o.reload=function(){Ti.API.info("qui"),Ti.API.info(a),o.remove(a),Ti.API.info("quo"),loader.showLoader(o),Ti.API.info("qua"),r.open("GET",global.bangServerUrl+"/challenge-myChallenge.php?challenge="+JSON.stringify(s)),r.send()},Ti.App.addEventListener("reload",function(){o.reload()}),o}function createTables(e,t,i,n){var a=Titanium.UI.createView({backgroundColor:"#90BD88",width:"100%",height:30,layout:"horizontal"}),o=Titanium.UI.createLabel({left:10,top:3,font:{fontSize:19,fontFamily:"Roboto-Light"},text:"Pronte per il duello",textAlign:"center",color:"white"}),r=Titanium.UI.createView({backgroundColor:"#64A8E4",width:"100%",height:30,layout:"horizontal"}),s=Titanium.UI.createLabel({left:10,top:3,font:{fontSize:19,fontFamily:"Roboto-Light"},text:"Sfide da accettare",textAlign:"center",color:"white"}),l=Titanium.UI.createView({backgroundColor:"#F4D181",width:"100%",height:30,layout:"horizontal"}),d=Titanium.UI.createLabel({left:10,top:3,font:{fontSize:19,fontFamily:"Roboto-Light"},text:"Sfide in attesa",textAlign:"center",color:"white"}),u=Titanium.UI.createView({backgroundColor:"#CD6565",width:"100%",height:30,layout:"horizontal"}),c=Titanium.UI.createLabel({left:10,top:3,font:{fontSize:19,fontFamily:"Roboto-Light"},text:"Sfide rifiutate",textAlign:"center",color:"white"});a.add(o),r.add(s),l.add(d),u.add(c);for(var f=[],p=[],g=[],h=[],m=Ti.App.Properties.getString("fb_id"),T=0;T<e.length;T++)0==e[T].status?null==e[T].id_winner&&f.push({title:"Sfida contro "+e[T].vsName,height:45,hasChild:"true",color:"#856C64",font:{fontSize:18,fontFamily:"Roboto-Light"},challenge_date:e[T].challenge_date,status:e[T].status,latitude:e[T].latitude,longitude:e[T].longitude,vsId:e[T].player_two,address:e[T].address,id:e[T].id}):1==e[T].status?e[T].player_one===m?p.push({title:"Sfida contro "+e[T].vsName,height:45,hasChild:"true",color:"#856C64",font:{fontSize:18,fontFamily:"Roboto-Light"},challenge_date:e[T].challenge_date,status:e[T].status,latitude:e[T].latitude,longitude:e[T].longitude,vsId:e[T].player_two,address:e[T].address,id:e[T].id}):e[T].player_two===m&&g.push({title:"Sfida contro "+e[T].vsName,height:45,hasChild:"true",color:"#856C64",font:{fontSize:18,fontFamily:"Roboto-Light"},challenge_date:e[T].challenge_date,status:e[T].status,latitude:e[T].latitude,longitude:e[T].longitude,vsId:e[T].player_two,address:e[T].address,id:e[T].id}):2==e[T].status?e[T].player_two===m?p.push({title:"Sfida contro "+e[T].vsName,height:45,hasChild:"true",color:"#856C64",font:{fontSize:18,fontFamily:"Roboto-Light"},challenge_date:e[T].challenge_date,status:e[T].status,latitude:e[T].latitude,longitude:e[T].longitude,vsId:e[T].player_two,address:e[T].address,id:e[T].id}):e[T].player_one===m&&g.push({title:"Sfida contro "+e[T].vsName,height:45,hasChild:"true",color:"#856C64",font:{fontSize:18,fontFamily:"Roboto-Light"},challenge_date:e[T].challenge_date,status:e[T].status,latitude:e[T].latitude,longitude:e[T].longitude,vsId:e[T].player_two,address:e[T].address,id:e[T].id}):3==e[T].status&&e[T].remove_challenge!==Ti.App.Properties.getString("fb_id")&&h.push({title:"Sfida contro "+e[T].vsName,height:45,color:"#856C64",font:{fontSize:18,fontFamily:"Roboto-Light"},challenge_date:e[T].challenge_date,status:e[T].status,latitude:e[T].latitude,longitude:e[T].longitude,vsId:e[T].player_two,address:e[T].address,id:e[T].id});var I=null,w=null,A=null,b=null;return 0!=f.length&&(I=Titanium.UI.createTableView({top:25,width:"100%",height:45*f.length+30,showVerticalScrollIndicator:!0,separatorColor:"#B8B1AF",backgroundColor:"#FDFDFD",headerView:a,data:f,scrollable:!1,selectionStyle:Titanium.UI.iPhone.TableViewCellSelectionStyle.GRAY}),I.addEventListener("click",function(e){var i=new t;Ti.API.info(e.rowData.title),i.initialize(e.rowData),global.mainTab.open(i,{transition:Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT})})),0!=p.length&&(w=Titanium.UI.createTableView({top:25,width:"100%",height:45*p.length+30,showVerticalScrollIndicator:!0,separatorColor:"#B8B1AF",backgroundColor:"#FDFDFD",headerView:r,data:p,scrollable:!1,selectionStyle:Titanium.UI.iPhone.TableViewCellSelectionStyle.GRAY}),w.addEventListener("click",function(e){var t=new i;Ti.API.info(e.rowData.title),t.initialize(e.rowData),global.mainTab.open(t,{transition:Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT})})),0!=g.length&&(A=Titanium.UI.createTableView({top:25,width:"100%",height:45*g.length+30,showVerticalScrollIndicator:!0,separatorColor:"#B8B1AF",backgroundColor:"#FDFDFD",headerView:l,data:g,scrollable:!1,selectionStyle:Titanium.UI.iPhone.TableViewCellSelectionStyle.GRAY}),A.addEventListener("click",function(e){var t=new n;Ti.API.info(e.rowData.title),t.initialize(e.rowData),global.mainTab.open(t,{transition:Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT})})),0!=h.length&&(b=Titanium.UI.createTableView({top:25,width:"100%",height:45*h.length+30,showVerticalScrollIndicator:!0,separatorColor:"#B8B1AF",backgroundColor:"#FDFDFD",headerView:u,data:h,scrollable:!1,selectionStyle:Titanium.UI.iPhone.TableViewCellSelectionStyle.GRAY,editable:!0}),b.addEventListener("delete",function(e){var t=Ti.Network.createHTTPClient({onload:function(){Ti.API.info("Received text: "+this.responseText);var e=JSON.parse(this.responseText);Ti.API.info(e.return),"0"===e.returnPlayer&&"0"===e.returnGetChallenge&&"0"===e.returnDeleteChallenge?(Ti.API.info("ok"),Ti.App.fireEvent("reload",{})):alert("Error")},onerror:function(e){Ti.API.debug(e.error)},timeout:5e3}),i={id:e.rowData.id,id_player:Ti.App.Properties.getString("fb_id")};Ti.API.info(JSON.stringify(i)),t.open("GET",global.bangServerUrl+"/challenge-removeRejectChallenge.php?challenge="+JSON.stringify(i)),t.send()})),[I,w,A,b]}module.exports=ChallengeWindow;