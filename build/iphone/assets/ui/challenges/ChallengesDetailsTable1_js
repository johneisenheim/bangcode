function ChallengesDetailsTable1(){var e=require("core/Countdown"),t=require("ui/customUI/BigTile"),i=new t;i.initialize("tileTitle",15,19);var n=require("ui/customUI/PageTitle"),a=new n;a.initialize("Duello",75);var o=require("ui/customUI/CustomDisabledButton"),r=new o;r.initialize("Inzia",35,18);var l=require("ui/customUI/CustomButton"),s=new l;s.initialize("Mostra mappa",10,18);var d=Titanium.UI.createWindow({navTintColor:"white",tintColor:"#E2BB5A",barColor:"#E2BB5A",extendEdges:[Ti.UI.EXTEND_EDGE_TOP],backgroundColor:"#F5F4F2",translucent:!0,statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,layout:"composite",backButtonTitle:String.format(L("main:back"),""),tabBarHidden:!0}),u=Titanium.UI.createScrollView({width:"100%",height:"100%",backgroundColor:"#F5F4F2",layout:"vertical"}),c=(Titanium.UI.createLabel({text:"",top:15,font:{fontSize:24,fontFamily:"Roboto-Light"},textAlign:"center",color:"#856C64",width:"95%"}),Titanium.UI.createLabel({text:"Tieniti pronto in",top:25,font:{fontSize:21,fontFamily:"Roboto-Light"},textAlign:"center",color:"#856C64",width:"95%"}));countdownLabel=Titanium.UI.createLabel({text:"Countdown",top:15,font:{fontSize:80,fontFamily:"Western"},textAlign:"center",color:"#856C64",width:"100%"});var f=Titanium.UI.createLabel({text:"Calcolo...",top:5,font:{fontSize:17,fontFamily:"Roboto-LightItalic"},textAlign:"center",color:"#856C64",width:"95%"}),p=Titanium.UI.createButton({title:"Ritirati",font:{fontSize:21},color:"#856C64",top:10});return p.addEventListener("click",function(){var e=Ti.UI.createAlertDialog({cancel:1,buttonNames:["Si, sono codardo","Ci ho ripensato"],message:"Sei sicuro di volerti ritirare?",title:"Ritirati"});e.show(),e.addEventListener("click",function(e){if(e.index!==e.source.cancel){loader.showLoader(d);var t=Ti.Network.createHTTPClient({onload:function(){Ti.API.info("Received text: "+this.responseText);var e=JSON.parse(this.responseText);Ti.API.info(e.return),"0"===e.return?(loader.hideLoader(d),Ti.API.info("ok"),Ti.App.fireEvent("reload",{}),setTimeout(function(){d.close()},1e3)):(loader.hideLoader(d),alert("Error"))},onerror:function(e){loader.hideLoader(d),Ti.API.debug(e.error)},timeout:5e3}),i={id:matchID,id_player:Ti.App.Properties.getString("fb_id")};Ti.API.info(JSON.stringify(i)),t.open("GET",global.bangServerUrl+"/challenge-retiredChallenge.php?challenge="+JSON.stringify(i)),t.send()}})}),d.initialize=function(t){i.setTitle(t.title+" nei paraggi di "+t.address);var n=t.challenge_date;Ti.API.info(n);var a=n.split(" "),o=a[0].split("-"),r=a[1].split(":");year=o[0],month=o[1],day=o[2],hours=r[0],minutes=r[1],seconds=r[2],latitude=t.latitude,longitude=t.longitude,matchID=t.id,setInterval(function(){timespan=e(null,new Date(year,month-1,day,hours,minutes,seconds),e.DEFAULTS,0,20),timespan.months>0?1==timespan.months?(countdownLabel.text=timespan.months+" mese",f.text=""):(countdownLabel.text=timespan.months+" mesi",f.text=""):timespan.days>0?1==timespan.days?(countdownLabel.text=timespan.days+" giorno",f.text=""):(countdownLabel.text=timespan.days+" giorni",f.text=""):(countdownLabel.text=timespan.hours+":"+timespan.minutes+":"+Math.floor(timespan.seconds),f.text="ore:minuti:secondi")},1e3)},d.addEventListener("close",function(){Ti.API.info("closing..."),clear()}),s.addEventListener("click",function(){var e=require("ui/challenges/Map");new e(latitude,longitude).open()}),u.add(a),u.add(i),u.add(c),u.add(countdownLabel),u.add(f),u.add(r),u.add(s),u.add(p),d.add(u),d}function startCountdown(){}function clear(){clearInterval(timespan)}var countdownLabel,timespan,year,month,day,hours,minutes,seconds,latitude,longitude,matchID;module.exports=ChallengesDetailsTable1;