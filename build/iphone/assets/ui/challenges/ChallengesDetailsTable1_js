function ChallengesDetailsTable1(){var e=require("core/Countdown"),t=-1,i=require("ui/customUI/BigTile"),n=new i;n.initialize("tileTitle",15,19);var a=require("ui/customUI/PageTitle"),o=new a;o.initialize("Duello",75);var r=require("ui/customUI/CustomDisabledButton"),l=new r;l.initialize("Inzia",35,18);var s=require("ui/customUI/CustomButton"),d=new s;d.initialize("Mostra mappa",10,18);var c=Titanium.UI.createWindow({navTintColor:"white",tintColor:"#E2BB5A",barColor:"#E2BB5A",extendEdges:[Ti.UI.EXTEND_EDGE_TOP],backgroundColor:"#F5F4F2",translucent:!0,statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,layout:"composite",backButtonTitle:String.format(L("main:back"),""),tabBarHidden:!0}),u=Titanium.UI.createScrollView({width:"100%",height:"100%",backgroundColor:"#F5F4F2",layout:"vertical"}),m=(Titanium.UI.createLabel({text:"",top:15,font:{fontSize:24,fontFamily:"Roboto-Light"},textAlign:"center",color:"#856C64",width:"95%"}),Titanium.UI.createLabel({text:"Tieniti pronto in",top:25,font:{fontSize:21,fontFamily:"Roboto-Light"},textAlign:"center",color:"#856C64",width:"95%"}));countdownLabel=Titanium.UI.createLabel({text:"Countdown",top:15,font:{fontSize:80,fontFamily:"Western"},textAlign:"center",color:"#856C64",width:"100%"});var f=Titanium.UI.createLabel({text:"Calcolo...",top:5,font:{fontSize:17,fontFamily:"Roboto-LightItalic"},textAlign:"center",color:"#856C64",width:"95%"}),p=Titanium.UI.createButton({title:"Ritirati",font:{fontSize:21},color:"#856C64",top:10});return p.addEventListener("click",function(){var e=Ti.UI.createAlertDialog({cancel:1,buttonNames:["Si, sono codardo","Ci ho ripensato"],message:"Sei sicuro di volerti ritirare?",title:"Ritirati"});e.show(),e.addEventListener("click",function(e){if(e.index!==e.source.cancel){loader.showLoader(c);var t=Ti.Network.createHTTPClient({onload:function(){Ti.API.info("Received text: "+this.responseText);var e=JSON.parse(this.responseText);Ti.API.info(e.return),"0"===e.return?(loader.hideLoader(c),Ti.API.info("ok"),Ti.App.fireEvent("reload",{}),setTimeout(function(){c.close()},1e3)):(loader.hideLoader(c),alert("Error"))},onerror:function(e){loader.hideLoader(c),Ti.API.debug(e.error)},timeout:5e3}),i={id:matchID,id_player:Ti.App.Properties.getString("fb_id")};Ti.API.info(JSON.stringify(i)),t.open("GET",global.bangServerUrl+"/challenge-retiredChallenge.php?challenge="+JSON.stringify(i)),t.send()}})}),c.initialize=function(i){n.setTitle(i.title+" nei paraggi di "+i.address);var a=i.challenge_date;Ti.API.info(i.player_one),Ti.App.Properties.getString("fb_id")===i.player_one?(player_one=i.player_one,player_two=i.player_two,t=1):(player_one=i.player_two,player_two=i.player_one,t=0),Ti.API.info(a);var o=a.split(" "),r=o[0].split("-"),s=o[1].split(":");year=r[0],month=r[1],day=r[2],hours=s[0],minutes=s[1],seconds=s[2],latitude=i.latitude,longitude=i.longitude,matchID=i.id,setInterval(function(){timespan=e(null,new Date(year,month-1,day,hours,minutes,seconds),e.DEFAULTS,0,20),timespan.months>0?1==timespan.months?(countdownLabel.text=timespan.months+" mese",f.text=""):(countdownLabel.text=timespan.months+" mesi",f.text=""):timespan.days>0?1==timespan.days?(countdownLabel.text=timespan.days+" giorno",f.text=""):(countdownLabel.text=timespan.days+" giorni",f.text=""):(countdownLabel.text=timespan.hours+":"+timespan.minutes+":"+Math.floor(timespan.seconds),f.text="ore:minuti:secondi",0==timespan.hours&&timespan.minutes<=10&&l.enable())},1e3)},l.addEventListener("click",function(){if(l.isEnabled)if(t){var e=require("ui/challenges/Master"),t=new e;t.setIDOpponent(player_two),t.open({modal:!0,modalTransitionStyle:Ti.UI.iPhone.MODAL_TRANSITION_STYLE_COVER_VERTICAL,modalStyle:Ti.UI.iPhone.MODAL_PRESENTATION_FORMSHEET})}else{var i=require("ui/challenges/Slave"),n=new i;n.setMasterID(player_one),n.open({modal:!0,modalTransitionStyle:Ti.UI.iPhone.MODAL_TRANSITION_STYLE_COVER_VERTICAL,modalStyle:Ti.UI.iPhone.MODAL_PRESENTATION_FORMSHEET})}}),c.addEventListener("close",function(){clear()}),d.addEventListener("click",function(){var e=require("ui/challenges/Map");new e(latitude,longitude).open()}),u.add(o),u.add(n),u.add(m),u.add(countdownLabel),u.add(f),u.add(l),u.add(d),u.add(p),c.add(u),c}function startCountdown(){}function clear(){clearInterval(timespan)}var countdownLabel,timespan,year,month,day,hours,minutes,seconds,latitude,longitude,player_one,player_two,matchID;module.exports=ChallengesDetailsTable1;