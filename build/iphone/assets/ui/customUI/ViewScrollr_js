function createCaptionView(e,t){var i=Ti.UI.createView({height:captionHeight,width:Ti.UI.FILL});return i.add(Ti.UI.createView({opacity:opacity,width:Ti.UI.FILL,height:Ti.UI.FILL,backgroundColor:t})),i.add(Ti.UI.createLabel({text:e,color:white,font:{fontSize:captionFontSize},height:Ti.UI.FILL,width:Ti.UI.FILL,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER})),i}function createNavPage(e,t,i,n){return Ti.UI.createView({backgroundColor:e,width:8,height:8,top:6,right:4,borderWidth:1,borderColor:i?t:e,borderRadius:n===NAV_STYLE.CIRCLE?4:0})}var navHeight=20,opacity=.5,captionHeight=25,captionFontSize=14,black="#000",white="#fff",scrollDelay=4e3,NAV_STYLE={BLOCK:"block",CIRCLE:"circle"};exports.create=function(e){var t,i,n,o,a=Ti.UI.createView({width:e.width||Ti.UI.FILL,height:e.height||Ti.UI.FILL,top:e.top,right:e.right,bottom:e.bottom,left:e.left,backgroundColor:e.backgroundColor||black}),r=Ti.UI.createView({height:navHeight,width:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,layout:"horizontal"}),l=Ti.UI.createScrollableView({showPagingControl:!1,width:Ti.UI.FILL,height:Ti.UI.FILL,disableBounce:e.disableBounce||!1,backgroundColor:e.backgroundColor||black}),s=function(){h||l.scrollToView(c<e.panels.length-1?c+1:0)},d=function(){t&&clearTimeout(t),t=setTimeout(s,e.delay||scrollDelay)},u=[],c=0,h=!1;if(e.panels){opacity=e.alpha||opacity;for(var g=0,T=e.panels.length;T>g;g++)n=e.panels[g],n.image?(i=n.maxZoomScale?Ti.UI.createScrollView({width:Ti.UI.FILL,height:Ti.UI.FILL,maxZoomScale:n.maxZoomScale}):Ti.UI.createView({width:Ti.UI.FILL,height:Ti.UI.FILL}),i.add(Ti.UI.createImageView({image:n.image,width:Ti.UI.SIZE}))):n.view&&(i=n.view),n.caption&&(o=createCaptionView(n.caption,e.navigation&&e.navigation.backgroundColor||black),o[e.navigation.onTop?"top":"bottom"]=e.navigation?navHeight:0,i.add(o)),l.addView(i),e.navigation&&(u.push(createNavPage(0==g?e.navigation.selectedColor:e.navigation.color,e.navigation.borderColor||e.navigation.selectedColor,e.navigation.showBorder,e.navigation.style||NAV_STYLE.CIRCLE)),r.add(u[g]))}return l.addEventListener("scrollEnd",function(){h=!1,e.auto&&!h&&d()}),l.addEventListener("scroll",function(t){c!=t.currentPage&&e.navigation&&(u[c].backgroundColor=e.navigation.color,u[t.currentPage].backgroundColor=e.navigation.selectedColor),c=t.currentPage,h=!0}),Ti.Gesture.addEventListener("orientationchange",function(){h=!1,e.auto&&d()}),a.add(l),e.navigation&&(i=Ti.UI.createView({width:Ti.UI.FILL,opacity:opacity,height:navHeight,bottom:0,backgroundColor:e.navigation.backgroundColor||black}),i[e.navigation.onTop?"top":"bottom"]=0,r[e.navigation.onTop?"top":"bottom"]=0,a.add(i),a.add(r),i=null),setTimeout(function(){e.auto&&!h&&d()},500),a},exports.NAV_STYLE=NAV_STYLE;